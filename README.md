# Turtle Soup AI Detective (JS_Doc_TurtleSoup_Playkit)

一个基于 **PlayKit JavaScript SDK** 的交互式「海龟汤（情景推理）」AI 游戏 Demo。  
玩家通过不断向 AI 主持人提问，逐步逼近故事真相，系统会根据玩家的推理进度动态解锁线索并展示解谜进度。

本项目是一个 **纯前端静态应用**，用于展示：
- PlayKit JS SDK 的实际使用方式
- AI 在逻辑推理类游戏中的主持与判定能力
- 基于“推理路径（Milestones）”的游戏进度设计

---

## 🌐 在线演示（Live Demo）

👉 **https://turtle-soup-eosin.vercel.app/**

无需本地环境，打开即可体验完整游戏流程。

---

## ✨ 项目特性

- 🧠 **AI 主持人**：严格遵循海龟汤规则，仅回答  
  **“是 / 不是 / 是也不是 / 与此无关”**
- 🧩 **推理进度系统**：通过 AI 判断玩家是否触及关键推理节点（Milestones）
- 💡 **动态线索解锁**：随着推理深入逐步解锁提示
- 🎮 **双模式玩法**
  - 经典剧本（内置故事）
  - AI 自定义生成剧本
- 🚀 **已部署至 Vercel**，可直接在线体验

---

## 📁 项目结构

```text
.
│
├── index.html
│   应用入口，定义整体页面结构与面板布局
│
├── style.css
│   全局样式（主题、布局、聊天区、进度条等）
│
├── css/
│   ├── menu.css
│   │   首页与面板导航相关样式
│   │
│   └── generation.css
│       AI 自定义生成界面与筛选控件样式
│
├── js/
│   ├── stories.js
│   │   内置海龟汤故事数据（谜面、真相、推理节点、提示）
│   │
│   ├── ai_client.js
│   │   PlayKit SDK 封装层：
│   │   - 初始化 SDK
│   │   - AI 主持人对话
│   │   - 推理进度判断（Milestones）
│   │   - AI 生成新故事
│   │
│   ├── game_logic.js
│   │   游戏核心逻辑：
│   │   - 当前故事状态
│   │   - 玩家历史记录
│   │   - 推理进度与线索解锁
│   │   - 胜利条件判定
│   │
│   └── app.js
│       应用控制层：
│       - DOM 事件绑定
│       - 页面切换
│       - UI 渲染
│       - 协调 AI 与游戏逻辑
│
├── .gitattributes
│   Git 属性配置
│
└── README.md
    项目说明文档
```

---

## 🧠 核心设计说明

本项目并非简单调用 AI 接口进行问答，而是围绕「海龟汤（情景推理）」这一玩法，对 AI 行为与游戏规则进行了系统化设计。

---

### 🔹 1. AI 主持人规则设计

AI 在本项目中被严格约束为 **海龟汤主持人角色**，而非自由聊天机器人：

- 所有回答 **必须基于当前故事真相**
- 对与推理无关的背景问题，统一返回 **「与此无关」**
- 仅当问题对推理有实质帮助时，才返回 **「是」**
- 若问题部分正确，则返回 **「是也不是」**

> 该设计确保了玩家无法通过“套话”或背景提问绕过推理过程，  
> 保证游戏体验符合传统海龟汤规则。

---

### 🔹 2. 推理进度（Milestones）机制

每个故事都定义了一组 **关键推理节点（Milestones）**，代表玩家需要逐步触及的核心事实。

游戏流程如下：

1. 玩家提出问题
2. AI 回答后，系统判断该问题是否触及某个 Milestone
3. 命中节点后，推理进度提升
4. 达到一定进度后，自动解锁对应提示（Hints）

进度条最高显示为 **99%**，  
仅当 AI 判断玩家已完整复述真相的逻辑链时，才会显示 **100% 并判定胜利**。

---

### 🔹 3. 动态线索（Hints）解锁设计

线索并非一次性给出，而是根据推理进度逐步解锁：

- 每条线索都绑定解锁条件（unlockAfter）
- 玩家无法在推理早期获得“剧透式提示”
- 解锁节奏与推理深度保持一致

该机制用于 **引导推理方向，而非直接给答案**。

---

### 🔹 4. AI 自定义剧本生成模式

在「自定义剧本」模式下，玩家可以选择：

- 故事类型：本格 / 变格 / 新本格
- 汤底风格：清汤 / 红汤 / 黑汤 / 王八汤

系统会通过 AI 生成一套完整的海龟汤结构，包括：

- 谜面（Puzzle）
- 真相（Truth）
- 关键推理节点（Milestones）
- 可解锁提示（Hints）

生成结果会被直接纳入统一的游戏逻辑流程中进行推理与判定。

---

## ⚠️ 注意事项
- 项目中的 PlayKit Token 仅用于演示用途
- 正式环境中应通过后端或环境变量管理密钥
- AI 返回结果依赖模型稳定性，已在逻辑中进行基础容错处理
